<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="assets/images/logo_favicon.ico">
  <title>DecorFairy - Weddings & Event Décor Specialist</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Roboto&display=swap" rel="stylesheet">
  <script>
    // Smooth scrolling for anchor links
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          e.preventDefault();
          document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
          });
        });
      });
    });

    // Scroll animations using Intersection Observer
    document.addEventListener("DOMContentLoaded", function(){
      const elements = document.querySelectorAll('.fade-up, .fade-in, .fade-in-delay');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2 });
      elements.forEach(el => observer.observe(el));
    });

    // Scroll-to-top button
    document.addEventListener("DOMContentLoaded", function(){
      const scrollBtn = document.querySelector("#scrollToTopBtn");
      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          scrollBtn.classList.add("show");
        } else {
          scrollBtn.classList.remove("show");
        }
      });
      scrollBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
  </script>
</head>
<body>
  <div class="top-bar">
    <nav>
      <a href="#" class="logo-link">
        <img src="assets/images/logo.png" alt="DecorFairy Logo" class="logo">
      </a>

      <script>
      document.addEventListener("DOMContentLoaded", function() {
        const logoLink = document.querySelector(".logo-link");
        logoLink.addEventListener("click", function(e) {
          e.preventDefault(); // stop default jump
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      });
      </script>

      <div class="nav-links">
        <a href="#services">Services</a>
        <a href="#instagram-feed">Gallery</a>
        <a href="#feedback">Feedback</a>
        <a href="#contact">Contact</a>
      </div>
    </nav>
    
    <!-- NEW fixed social banner -->
    <div class="social-banner">
      <div class="social-links">
        <a href="https://www.instagram.com/decorfairyuk/" target="_blank">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/instagram.svg" alt="Instagram" class="social-icon">
          Instagram: @decorfairyuk
        </a>
        <a href="https://www.tiktok.com/@decorfairyuk" target="_blank">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/tiktok.svg" alt="TikTok" class="social-icon">
          TikTok: @decorfairyuk
        </a>
        <a href="https://wa.me/447730155179" target="_blank">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/whatsapp.svg" alt="WhatsApp" class="social-icon">
          WhatsApp: +44 7730 155179
        </a>
      </div>
    </div>
    
  </div>

  <header>
    <picture>
      <source srcset="assets/images/hero_new.webp" type="image/webp">
      <img src="assets/images/hero.jpg" alt="Hero Image" class="hero-image">
    </picture>
    <a href="#services" class="scroll-cue" aria-label="Scroll to content">↓</a>
  </header>

  <section id="services" class="fade-up">
    <h2>Our Services</h2>
    <div class="services">
          <div class="service-box highlight">
      <h3>
        Chocolate Fountain Hire 
        <span class="new-badge">New</span>
      </h3>
      <p>Delight your guests with our premium chocolate fountain service — perfect for weddings, parties & events.</p>
    </div>
    <div class="service-box highlight">
      <h3>
        Candy Floss Hire 
        <span class="new-badge">New</span>
      </h3>
      <p>Add a touch of fun with our candy floss machine hire, serving freshly spun candy clouds at your event.</p>
    </div>
      <div class="service-box">
        <h3>Arch & Floral Partition Garlands</h3>
        <p>Traditional Wedding/Nikkah partitions (available as arch and authentic design) to suit your theme, colour scheme and venue.</p>
      </div>
      <div class="service-box">
        <h3>Floral Backdrops & Walls</h3>
        <p>Beautiful artificial flowers, perfect for capturing life-long memories.</p>
      </div>
      <div class="service-box">
        <h3>Event Styling & Setup</h3>
        <p>From weddings to birthdays, we handle full décor setup for a seamless event experience.</p>
      </div>
      <div class="service-box">
        <h3>Custom Theme Décor</h3>
        <p>Bespoke designs tailored to your chosen theme; including stage seating, lighting and wedding entrance signage.</p>
      </div>
    </div>
  </section>

  <section id="instagram-feed" class="fade-up">
    <h2>Event Gallery</h2>
    <p>Follow us on Instagram for our latest event designs and décor setups.</p>
    <!-- SnapWidget -->
    <script src="https://snapwidget.com/js/snapwidget.js"></script>
    <iframe src="https://snapwidget.com/embed/1103957" class="snapwidget-widget" allowtransparency="true" frameborder="0" scrolling="no" style="border:none; overflow:hidden;  width:100%; " title="Posts from Instagram"></iframe>
  </section>

  <section id="feedback" class="fade-up">
    <h2>What Our Clients Say</h2>
    <div class="feedback">
      <div class="feedback-box">
        <p>"Decor Fairy transformed my wedding venue into something magical. Every detail was perfect!"</p>
        <strong>- Sarah W.</strong>
      </div>
      <div class="feedback-box">
        <p>"The balloon arch and floral backdrop were beyond what I imagined. Thank you for making our baby shower beautiful!"</p>
        <strong>- Ayesha K.</strong>
      </div>
      <div class="feedback-box">
        <p>"Professional, creative and reliable. Our corporate event looked amazing!"</p>
        <strong>- RedStone Group</strong>
      </div>
    </div>
  </section>

  <section class="cta fade-in">
    <h2>Book Your Event Styling Today</h2>
    <p>Bring your vision to life with our bespoke décor solutions.</p>
    <button onclick="location.href='#contact'">Get in Touch</button>
  </section>

  <!-- Contact Form Section -->

  <section id="contact" class="fade-up">
    <h2>Contact Us</h2>
    <div class="form-left">
        <form id="contact-form" action="https://formspree.io/f/mblkkvrj" method="POST" novalidate>
      <label>
        Name
        <input type="text" name="Name" placeholder="Your name" required>
      </label>

      <label>
        Event Date (or rough estimate)
        <input type="date" id="event_date_raw" required>
      </label>

      <!-- hidden field that *will* be submitted, in DD/MM/YYYY format -->
      <input type="hidden" name="Event Date" id="event_date_display">

      <label>
        Booking Category
        <select name="Booking Enquiry" required>
          <option value="">Select...</option>
          <option value="Wedding">Wedding</option>
          <option value="Birthday">Birthday</option>
          <option value="Corporate">Corporate</option>
          <option value="Baby Shower">Baby Shower</option>
          <option value="Other">Other</option>
        </select>
      </label>

      <label>
        Mobile Number
        <input type="tel" id="phone" name="Mobile Number" inputmode="tel" placeholder="0000 000 000" required>
      </label>

      <label>
        Email Address (optional)
        <input type="email" name="Customer Email Address" placeholder="Your email">
      </label>

      <input type="hidden" name="_subject" value="New event enquiry from DecorFairy site">
      <input type="text" name="_gotcha" style="display:none" autocomplete="off">

      <button type="submit">Send</button>

      <div id="form-status" aria-live="polite" style="margin-top:10px;"></div>
    </form>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const form = document.getElementById("contact-form");
      const status = document.getElementById("form-status");
      const phoneInput = document.getElementById("phone");
      const dateInput = document.getElementById("event_date_raw");      // the visible picker
      const hiddenDate = document.getElementById("event_date_display"); // the submitted, formatted value 
      const prefix = "+44";

      // Helpers
      function formatDateISO(d) {
        return d.toISOString().split('T')[0];
      }
      function formatDateDisplay(d) {
        const dd = String(d.getDate()).padStart(2, '0');
        const mm = String(d.getMonth() + 1).padStart(2, '0');
        const yyyy = d.getFullYear();
        return `${dd}/${mm}/${yyyy}`;
      }

      // Date logic: disallow today and past, allow up to one year ahead
      const today = new Date();
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);
      const oneYearAhead = new Date();
      oneYearAhead.setFullYear(oneYearAhead.getFullYear() + 1);

      dateInput.setAttribute("min", formatDateISO(tomorrow));
      dateInput.setAttribute("max", formatDateISO(oneYearAhead));

      // **<< INSERT CUSTOM VALIDITY LISTENER HERE >>**
      dateInput.addEventListener("input", () => {
        const selected = new Date(dateInput.value);
        const todayZero = new Date();
        todayZero.setHours(0, 0, 0, 0);
        if (isNaN(selected)) {
          dateInput.setCustomValidity("Please pick a valid future date.");
        } else if (selected <= todayZero) {
          dateInput.setCustomValidity("Please choose a date after today.");
        } else {
          dateInput.setCustomValidity(""); // clear any previous message
        }
      });

      // Phone formatting helpers
      function formatUKMobile(raw) {
        let digits = raw.replace(/\D/g, "");

        if (digits.startsWith("0")) {
          digits = digits.slice(1);
        } else if (digits.startsWith("44")) {
          digits = digits.slice(2);
        }

        let formattedLocal = digits;
        if (digits.length === 10) {
          const part1 = digits.slice(0, 4);
          const part2 = digits.slice(4, 7);
          const part3 = digits.slice(7, 10);
          formattedLocal = `${part1} ${part2} ${part3}`;
        } else if (digits.length > 4) {
          formattedLocal = digits.replace(/(\d{4})(\d{3})(\d{0,3})/, (_, a, b, c) => {
            return c ? `${a} ${b} ${c}` : `${a} ${b}`;
          });
        }

        return `${prefix} ${formattedLocal}`.trim();
      }

      // Initialize phone prefix if empty
      if (!phoneInput.value) {
        phoneInput.value = prefix + " ";
      }

      phoneInput.addEventListener("focus", () => {
        if (!phoneInput.value.startsWith(prefix)) {
          phoneInput.value = prefix + " ";
        }
      });

      phoneInput.addEventListener("blur", () => {
        phoneInput.value = formatUKMobile(phoneInput.value);
      });

      // Submission handler
      form.addEventListener("submit", async function(e) {
        e.preventDefault();
        status.textContent = "";

        // Validate event date is strictly after today
        const selectedDate = new Date(dateInput.value);
        if (isNaN(selectedDate)) {
          status.textContent = "Please select a valid event date.";
          return;
        }
        const todayZero = new Date();
        todayZero.setHours(0, 0, 0, 0);
        if (selectedDate <= todayZero) {
          status.textContent = "Please choose a date after today.";
          return;
        }

        // Normalize and validate phone
        const normalizedPhone = formatUKMobile(phoneInput.value);
        if (!normalizedPhone.startsWith("+44")) {
          status.textContent = "Phone number must start with +44.";
          return;
        }
        phoneInput.value = normalizedPhone;

        // selectedDate already validated to be > today
        const displayDate = formatDateDisplay(selectedDate); // returns DD/MM/YYYY
        hiddenDate.value = displayDate; // inject into hidden field so Formspree gets DD/MM/YYYY

        status.textContent = "Sending...";

        const formData = new FormData(form);

        try {
          const response = await fetch("https://formspree.io/f/mblkkvrj", {
            method: "POST",
            body: formData,
            headers: {
              "Accept": "application/json"
            }
          });

          if (response.ok) {
            status.textContent = `Thanks! Your enquiry for ${displayDate} has been sent.`;
            form.reset();
            phoneInput.value = prefix + " ";
            dateInput.value = formatDateISO(tomorrow);
          } else {
            const data = await response.json();
            if (data.errors) {
              status.textContent = data.errors.map(err => err.message).join(", ");
            } else {
              status.textContent = "Oops! There was a problem submitting the form.";
            }
          }
        } catch (err) {
          status.textContent = "Network error. Please try again later.";
        }
      });
    });
    </script>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 DecorFairyUK. All rights reserved. Follow us on 
       <a href="https://www.instagram.com/decorfairyuk/">Instagram</a> & 
       <a href="https://www.tiktok.com/@decorfairyuk">TikTok</a></p>
  </footer>

  <!-- Scroll to Top Button -->
  <button id="scrollToTopBtn" title="Go to top">↑</button>

</body>
</html>
